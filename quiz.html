<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz Jeux VidÃ©os</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="styles/main.css">
    <link rel="stylesheet" href="styles/quiz.css">
    
    <style>
        /* CORRECTION DU LAYOUT */
        body, html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            background: linear-gradient(135deg, #0f0c29 0%, #302b63 50%, #24243e 100%);
        }
        
        #quiz-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: block;
        }
        
        /* S'assurer que tout est visible */
        .header, .quiz-content, .video-section, .answers-section {
            opacity: 1;
            visibility: visible;
        }
        
        /* Correction largeur */
        .quiz-content {
            display: flex;
            width: 100%;
            height: calc(100% - 80px);
            gap: 30px;
            padding: 20px;
            box-sizing: border-box;
        }
        
        .video-column {
            flex: 3;
            min-width: 0;
        }
        
        .answers-column {
            flex: 1;
            min-width: 300px;
        }
        
        .video-section {
            height: 100%;
            padding-bottom: 0;
            position: relative;
        }
        
        #player-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }
    </style>
</head>
<body>
    <!-- Ã‰CRAN QUIZ SEULEMENT -->
    <div id="quiz-screen" class="screen active">
        <div class="header">
            <div class="title">
                <i class="fas fa-gamepad"></i>
                <span id="quiz-title">QUIZ JEUX VIDÃ‰OS</span>
            </div>
            <div class="stats">
                <div class="stat">
                    <i class="fas fa-question"></i>
                    Question: <span id="question-count">1</span>/<span id="total-questions">10</span>
                </div>
                <button id="delete-video-btn" class="stat delete-btn">
                    <i class="fas fa-trash-alt"></i> Supprimer
                </button>
                <button id="quit-btn" class="stat" style="background: rgba(255, 71, 87, 0.3);">
                    <i class="fas fa-sign-out-alt"></i> Quitter
                </button>
            </div>
        </div>
        
        <div class="quiz-content">
            <div class="video-column">
                <div class="video-section">
                    <div id="player-container"></div>
                    <div class="black-overlay" id="black-overlay"></div>
                    <div class="result-box" id="result-box">
                        <div class="result-content">
                            <div class="result-icon"></div>
                            <div class="result-game-name"></div>
                            <div class="result-status"></div>
                        </div>
                    </div>
                    <div class="timer-box" id="timer-box">
                        <div class="timer-icon">ðŸŽµ</div>
                        <div class="timer-text">Ã‰coutez la musique</div>
                        <div class="timer-count">20</div>
                    </div>
                    <div class="youtube-mask">
                        <div class="mask-top"></div>
                        <div class="mask-bottom"></div>
                    </div>
                </div>
            </div>
            
            <div class="answers-column">
                <div class="answers-section" id="answers-section">
                    <h3><i class="fas fa-question"></i> Quel est ce jeu vidÃ©o ?</h3>
                    <div class="answers-grid" id="answers-grid"></div>
                </div>
                <button id="next-btn" class="btn-next" style="display: none;">
                    <i class="fas fa-forward"></i> QUESTION SUIVANTE
                </button>
            </div>
        </div>
    </div>

    <script src="https://www.youtube.com/iframe_api"></script>
    <script src="scripts/config.js"></script>
    <script src="scripts/deletedGames.js"></script>
    <script src="scripts/games.js"></script>
    <script src="scripts/YouTubePlayer.js"></script>
    <script src="scripts/PhaseManager.js"></script>
    <script src="scripts/QuestionManager.js"></script>
    <script src="scripts/GameManager.js"></script>
    <script src="scripts/SessionManager.js"></script>
    
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            console.log('ðŸŽ® Quiz - Initialisation...');
            
            // Initialiser
            const gameManager = new GameManager();
            window.gameManager = gameManager;
            gameManager.init();
            
            // DÃ©marrer
            setTimeout(() => {
                if (gameManager.startGame) {
                    gameManager.startGame();
                }
            }, 1000);
            
            // Bouton quitter
            document.getElementById('quit-btn').addEventListener('click', () => {
                if (confirm('Quitter le quiz ?')) {
                    window.location.href = 'index.html';
                }
            });
            
            // Titre selon session
            const urlParams = new URLSearchParams(window.location.search);
            const sessionId = urlParams.get('session');
            if (sessionId) {
                document.getElementById('quiz-title').textContent += ` - Session ${sessionId}`;
            }
        });
    </script>
</body>
</html>